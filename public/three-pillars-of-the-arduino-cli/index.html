






<!doctype html>
<html
  lang="en"
  dir="ltr"
  class="scroll-smooth"
  data-default-appearance="light"
  data-auto-appearance="true"
><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#FFFFFF" />
  
  <title>The three pillars of the Arduino CLI &middot; /dev/ by Massimiliano Pippi</title>
    <meta name="title" content="The three pillars of the Arduino CLI &middot; /dev/ by Massimiliano Pippi" />
  
  
  
  
  
  <script
    type="text/javascript"
    src="http://localhost:1313/js/appearance.min.8a082f81b27f3cb2ee528df0b0bdc39787034cf2cc34d4669fbc9977c929023c.js"
    integrity="sha256-iggvgbJ/PLLuUo3wsL3Dl4cDTPLMNNRmn7yZd8kpAjw="
  ></script>
  
  
  
  
  
  
  
  
  <link
    type="text/css"
    rel="stylesheet"
    href="http://localhost:1313/css/main.bundle.min.2abed97d6210907523664b7e6725ba691bc95b0ee54b6e46cff169dfba68ae29.css"
    integrity="sha256-Kr7ZfWIQkHUjZkt&#43;ZyW6aRvJWw7lS25Gz/Fp37porik="
  />
  
  
  
  
  
  
  
  <meta
    name="description"
    content="
      
        This blog post was hosted in the Arduino Engineering Blog, you can
read it here.
The Arduino CLI is an open-source command line application written in Golang that can be used from a terminal to
compile, verify and upload sketches to Arduino boards, and that’s capable of managing all the software and tools
needed in the process. But don’t get fooled by its name: the Arduino CLI can do much more than the average
console application, as shown by the Pro IDE and Arduino Create, which rely on it for similar purposes but each
one in a completely different way from the other.
      
    "
  />
  
  
  
  
    <link rel="canonical" href="http://localhost:1313/three-pillars-of-the-arduino-cli/" />
  
  
  
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
  
  
  
  
  
  
  
  
  <meta property="og:url" content="http://localhost:1313/three-pillars-of-the-arduino-cli/">
  <meta property="og:site_name" content="/dev/ by Massimiliano Pippi">
  <meta property="og:title" content="The three pillars of the Arduino CLI">
  <meta property="og:description" content="This blog post was hosted in the Arduino Engineering Blog, you can read it here.
The Arduino CLI is an open-source command line application written in Golang that can be used from a terminal to compile, verify and upload sketches to Arduino boards, and that’s capable of managing all the software and tools needed in the process. But don’t get fooled by its name: the Arduino CLI can do much more than the average console application, as shown by the Pro IDE and Arduino Create, which rely on it for similar purposes but each one in a completely different way from the other.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="writing">
    <meta property="article:published_time" content="2020-07-06T00:00:00+02:00">
    <meta property="article:modified_time" content="2020-07-06T00:00:00+02:00">
    <meta property="article:tag" content="Golang">
    <meta property="article:tag" content="Arduino">

  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="The three pillars of the Arduino CLI">
  <meta name="twitter:description" content="This blog post was hosted in the Arduino Engineering Blog, you can read it here.
The Arduino CLI is an open-source command line application written in Golang that can be used from a terminal to compile, verify and upload sketches to Arduino boards, and that’s capable of managing all the software and tools needed in the process. But don’t get fooled by its name: the Arduino CLI can do much more than the average console application, as shown by the Pro IDE and Arduino Create, which rely on it for similar purposes but each one in a completely different way from the other.">

  
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Article",
    "articleSection": "Writings",
    "name": "The three pillars of the Arduino CLI",
    "headline": "The three pillars of the Arduino CLI",
    
    "abstract": "\u003cp\u003e\u003cstrong\u003eThis blog post was hosted in the Arduino Engineering Blog, you can\n\u003ca href=\u0022https:\/\/blog.arduino.cc\/2020\/07\/06\/the-three-pillars-of-the-arduino-cli\/\u0022 target=\u0022_blank\u0022 rel=\u0022noreferrer\u0022\u003eread it here\u003c\/a\u003e.\u003c\/strong\u003e\u003c\/p\u003e\n\u003cp\u003eThe Arduino CLI is an open-source command line application written in Golang that can be used from a terminal to\ncompile, verify and upload sketches to Arduino boards, and that’s capable of managing all the software and tools\nneeded in the process. But don’t get fooled by its name: the Arduino CLI can do much more than the average\nconsole application, as shown by the Pro IDE and Arduino Create, which rely on it for similar purposes but each\none in a completely different way from the other.\u003c\/p\u003e",
    "inLanguage": "en",
    "url" : "http:\/\/localhost:1313\/three-pillars-of-the-arduino-cli\/",
    "author" : {
      "@type": "Person",
      "name": "Massimiliano Pippi"
    },
    "copyrightYear": "2020",
    "dateCreated": "2020-07-06T00:00:00\u002b02:00",
    "datePublished": "2020-07-06T00:00:00\u002b02:00",
    
    "dateModified": "2020-07-06T00:00:00\u002b02:00",
    
    "keywords": ["golang","arduino"],
    
    "mainEntityOfPage": "true",
    "wordCount": "935"
  }
  </script>
    
    <script type="application/ld+json">
    {
   "@context": "https://schema.org",
   "@type": "BreadcrumbList",
   "itemListElement": [
     {
       "@type": "ListItem",
       "item": "http://localhost:1313/",
       "name": "Dev by Massimiliano Pippi",
       "position": 1
     },
     {
       "@type": "ListItem",
       "item": "http://localhost:1313/writing/",
       "name": "Writings",
       "position": 2
     },
     {
       "@type": "ListItem",
       "name": "The Three Pillars of the Arduino CLI",
       "position": 3
     }
   ]
 }
  </script>

  
  
    <meta name="author" content="Massimiliano Pippi" />
  
  
    
      <link href="https://github.com/masci" rel="me" />
    
  
  
  







  
  

  
  
</head>
<body
    class="m-auto flex h-screen max-w-7xl flex-col bg-neutral px-6 text-lg leading-7 text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32"
  >
    <div id="the-top" class="absolute flex self-center">
      <a
        class="-translate-y-8 rounded-b-lg bg-primary-200 px-3 py-1 text-sm focus:translate-y-0 dark:bg-neutral-600"
        href="#main-content"
        ><span class="pe-2 font-bold text-primary-600 dark:text-primary-400">&darr;</span
        >Skip to main content</a
      >
    </div>
    
    
      <header class="py-6 font-semibold text-neutral-900 dark:text-neutral sm:py-10 print:hidden">
  <nav class="flex items-start justify-between sm:items-center">
    
    <div class="flex flex-row items-center">
      
  <a
    class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2"
    rel="me"
    href="/"
    >/dev/ by Massimiliano Pippi</a
  >

    </div>
    
    
      <ul class="flex list-none flex-col text-end sm:flex-row">
        
          
            
            <li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5">
              
                <a
                  href="/now/"
                  title="What I&#39;m doing Now"
                  
                  ><span
                      class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2"
                      >Now</span
                    >
                  </a
                >
              
            </li>
          
            
            <li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5">
              
                <a
                  href="/writing/"
                  title="Writings"
                  
                  ><span
                      class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2"
                      >Stuff I write</span
                    >
                  </a
                >
              
            </li>
          
            
            <li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5">
              
                <a
                  href="/book/"
                  title=""
                  
                  ><span
                      class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2"
                      >Stuff I read</span
                    >
                  </a
                >
              
            </li>
          
            
            <li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5">
              
                <a
                  href="/talk/"
                  title="Talks"
                  
                  ><span
                      class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2"
                      >Stuff I say</span
                    >
                  </a
                >
              
            </li>
          
            
            <li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5">
              
                <a
                  href="https://github.com/masci/dev"
                  title=""
                  target="_blank"
                  >
                    <span
                      class="group-dark:hover:text-primary-400 transition-colors group-hover:text-primary-600"
                    ><span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
</span></span></a
                >
              
            </li>
          
          
        
      </ul>
    
  </nav>
</header>

    
    <div class="relative flex grow flex-col">
      <main id="main-content" class="grow">
        
  <article>
    <header class="max-w-prose">
      
      <h1 class="mb-8 mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
        The three pillars of the Arduino CLI
      </h1>
      
        <div class="mb-10 text-base text-neutral-500 dark:text-neutral-400 print:hidden">
          





  
  



  

  
  
    
  

  

  

  
    
  

  


  <div class="flex flex-row flex-wrap items-center">
    
    
      <time datetime="2020-07-06 00:00:00 &#43;0200 CEST">6 July 2020</time><span class="px-2 text-primary-500">&middot;</span><span title="Reading time">5 mins</span>
    

    
    
  </div>

  
  


        </div>
      
      
    </header>
    <section class="prose mt-0 flex max-w-full flex-col dark:prose-invert lg:flex-row">
      
      <div class="min-h-0 min-w-0 max-w-prose grow">
        <p><strong>This blog post was hosted in the Arduino Engineering Blog, you can
<a href="https://blog.arduino.cc/2020/07/06/the-three-pillars-of-the-arduino-cli/" target="_blank" rel="noreferrer">read it here</a>.</strong></p>
<p>The Arduino CLI is an open-source command line application written in Golang that can be used from a terminal to
compile, verify and upload sketches to Arduino boards, and that’s capable of managing all the software and tools
needed in the process. But don’t get fooled by its name: the Arduino CLI can do much more than the average
console application, as shown by the Pro IDE and Arduino Create, which rely on it for similar purposes but each
one in a completely different way from the other.</p>
<p>In this article, we introduce the three pillars of the Arduino CLI, explaining how we designed the software so
that it can be effectively leveraged under different scenarios.</p>
<h2 id="the-first-pillar-command-line-interface" class="relative group">The first pillar: command line interface <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#the-first-pillar-command-line-interface" aria-label="Anchor">#</a></span></h2><h3 id="console-applications-for-humans" class="relative group">Console applications for humans <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#console-applications-for-humans" aria-label="Anchor">#</a></span></h3><p>As you might expect, the first way to use the Arduino CLI is from a terminal and by a human, and user experience
plays a key role here. The UX is under a continuous improvement process as we want the tool to be powerful
without being too complicated. We heavily rely on sub-commands to provide a rich set of different operations
logically grouped together, so that users can easily explore the interface while getting very specific contextual
help.</p>

  
  
  
  
  

  
  
  <figure class="mx-auto my-0 rounded-md">
    
      
      








  
    <picture
      class="mx-auto my-0 rounded-md"
      
    >
      
      
      
      
        <source
          
            srcset="http://localhost:1313/three-pillars-of-the-arduino-cli/arduino-cli-home_hu_12599c513305555.webp 330w,http://localhost:1313/three-pillars-of-the-arduino-cli/arduino-cli-home_hu_926c6494be16263d.webp 660w
            
              ,http://localhost:1313/three-pillars-of-the-arduino-cli/arduino-cli-home_hu_d78d81e8ddef2048.webp 1024w
            
            
              ,http://localhost:1313/three-pillars-of-the-arduino-cli/arduino-cli-home_hu_d3099cad824b0d1.webp 1320w
            "
          
          sizes="100vw"
          type="image/webp"
        />
      
      <img
        width="1600"
        height="1388"
        class="mx-auto my-0 rounded-md"
        
        loading="lazy" decoding="async"
        
          src="http://localhost:1313/three-pillars-of-the-arduino-cli/arduino-cli-home_hu_7e6c18daa1b5db13.png" srcset="http://localhost:1313/three-pillars-of-the-arduino-cli/arduino-cli-home_hu_38a263ccaf8fc979.png 330w,http://localhost:1313/three-pillars-of-the-arduino-cli/arduino-cli-home_hu_7e6c18daa1b5db13.png 660w
          
            ,http://localhost:1313/three-pillars-of-the-arduino-cli/arduino-cli-home_hu_48bbd768e0795c6e.png 1024w
          
          
            ,http://localhost:1313/three-pillars-of-the-arduino-cli/arduino-cli-home_hu_15bfc3f818451217.png 1320w
          "
          sizes="100vw"
        
      />
    </picture>
  


    
  </figure>


<h3 id="console-applications-for-robots" class="relative group">Console applications for robots <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#console-applications-for-robots" aria-label="Anchor">#</a></span></h3><p>Humans are not the only type of customers we want to support and the Arduino CLI was also designed to be used
programmatically — think about automation pipelines or a CI/CD system.</p>
<p>There are some niceties to observe when you write software that’s supposed to be easy to run when unattended and
one in particular is the ability to run without a configuration file. This is possible because every
configuration option you find in the arduino-cli.yaml configuration file can be provided either through a command
line flag or by setting an environment variable. To give an example, the following commands are all equivalent
and will proceed fetching the unstable package index that can be used to work with experimental versions of cores:</p>

  
  
  
  
  

  
  
  <figure class="mx-auto my-0 rounded-md">
    
      
      








  
    <picture
      class="mx-auto my-0 rounded-md"
      
    >
      
      
      
      
        <source
          
            srcset="http://localhost:1313/three-pillars-of-the-arduino-cli/arduino-cli-core_hu_eb101ae48fc597af.webp 330w,http://localhost:1313/three-pillars-of-the-arduino-cli/arduino-cli-core_hu_ef9ddac06fcb75dc.webp 660w
            
              ,http://localhost:1313/three-pillars-of-the-arduino-cli/arduino-cli-core_hu_df7b536932b6bf5d.webp 1024w
            
            
              ,http://localhost:1313/three-pillars-of-the-arduino-cli/arduino-cli-core_hu_5388802150e8ef7f.webp 1320w
            "
          
          sizes="100vw"
          type="image/webp"
        />
      
      <img
        width="1600"
        height="786"
        class="mx-auto my-0 rounded-md"
        
        loading="lazy" decoding="async"
        
          src="http://localhost:1313/three-pillars-of-the-arduino-cli/arduino-cli-core_hu_45d9449356e9e824.png" srcset="http://localhost:1313/three-pillars-of-the-arduino-cli/arduino-cli-core_hu_6e14d11475c5c58d.png 330w,http://localhost:1313/three-pillars-of-the-arduino-cli/arduino-cli-core_hu_45d9449356e9e824.png 660w
          
            ,http://localhost:1313/three-pillars-of-the-arduino-cli/arduino-cli-core_hu_43cc55e8c67f130e.png 1024w
          
          
            ,http://localhost:1313/three-pillars-of-the-arduino-cli/arduino-cli-core_hu_9b46942fbf3a753a.png 1320w
          "
          sizes="100vw"
        
      />
    </picture>
  


    
  </figure>


<p>See the <a href="https://arduino.github.io/arduino-cli/latest/configuration/" target="_blank" rel="noreferrer">documentation</a> for details about Arduino
CLI’s configuration system.</p>
<p>Consistent with the previous paragraph, when it comes to providing output the Arduino CLI aims to be user
friendly but also slightly verbose, something that doesn’t play well with robots. This is why we added an option
to provide output that’s easy to parse. For example, the following figure shows what getting the software version
in JSON format looks like.</p>

  
  
  
  
  

  
  
  <figure class="mx-auto my-0 rounded-md">
    
      
      








  
    <picture
      class="mx-auto my-0 rounded-md"
      
    >
      
      
      
      
        <source
          
            srcset="http://localhost:1313/three-pillars-of-the-arduino-cli/arduino-cli-version-json_hu_a07a765030e2d75f.webp 330w,http://localhost:1313/three-pillars-of-the-arduino-cli/arduino-cli-version-json_hu_bbc692d3babc4932.webp 660w
            
              ,http://localhost:1313/three-pillars-of-the-arduino-cli/arduino-cli-version-json_hu_9cc5c71c49b54941.webp 1024w
            
            
              ,http://localhost:1313/three-pillars-of-the-arduino-cli/arduino-cli-version-json_hu_8555db46a2e142b4.webp 1320w
            "
          
          sizes="100vw"
          type="image/webp"
        />
      
      <img
        width="1360"
        height="588"
        class="mx-auto my-0 rounded-md"
        
        loading="lazy" decoding="async"
        
          src="http://localhost:1313/three-pillars-of-the-arduino-cli/arduino-cli-version-json_hu_613704edada66712.png" srcset="http://localhost:1313/three-pillars-of-the-arduino-cli/arduino-cli-version-json_hu_17c6d796b6e2740a.png 330w,http://localhost:1313/three-pillars-of-the-arduino-cli/arduino-cli-version-json_hu_613704edada66712.png 660w
          
            ,http://localhost:1313/three-pillars-of-the-arduino-cli/arduino-cli-version-json_hu_66123a9ab4f06fcc.png 1024w
          
          
            ,http://localhost:1313/three-pillars-of-the-arduino-cli/arduino-cli-version-json_hu_adc32eaaaf2d8fe0.png 1320w
          "
          sizes="100vw"
        
      />
    </picture>
  


    
  </figure>


<p>Even if not related to software design, one last feature that’s worth mentioning is the availability of a
one-line installation script that can be used to make the latest version of the Arduino CLI available on most
systems with an HTTP client like curl or wget and a shell like bash.</p>
<h2 id="the-second-pillar-grpc-interface" class="relative group">The second pillar: gRPC interface <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#the-second-pillar-grpc-interface" aria-label="Anchor">#</a></span></h2><p>gRPC is a high-performance RPC framework that can efficiently connect client and server applications. The Arduino
CLI can act as a gRPC server (we call it daemon mode), exposing a set of procedures that implement the very same
set of features of the command line interface and waiting for clients to connect and use them. To give an idea,
the following is some Golang code capable of retrieving the version number of a remote running Arduino CLI server
instance:</p>

  
  
  
  
  

  
  
  <figure class="mx-auto my-0 rounded-md">
    
      
      








  
    <picture
      class="mx-auto my-0 rounded-md"
      
    >
      
      
      
      
        <source
          
            srcset="http://localhost:1313/three-pillars-of-the-arduino-cli/arduino-cli-main_hu_345d2af1f9e7fd32.webp 330w,http://localhost:1313/three-pillars-of-the-arduino-cli/arduino-cli-main_hu_535ad89a9a85c3a.webp 660w
            
              ,http://localhost:1313/three-pillars-of-the-arduino-cli/arduino-cli-main_hu_5435a910ae20f5ab.webp 1024w
            
            
              ,http://localhost:1313/three-pillars-of-the-arduino-cli/arduino-cli-main_hu_6645717953a2c063.webp 1320w
            "
          
          sizes="100vw"
          type="image/webp"
        />
      
      <img
        width="1600"
        height="966"
        class="mx-auto my-0 rounded-md"
        
        loading="lazy" decoding="async"
        
          src="http://localhost:1313/three-pillars-of-the-arduino-cli/arduino-cli-main_hu_77bb4f336cd88bc8.png" srcset="http://localhost:1313/three-pillars-of-the-arduino-cli/arduino-cli-main_hu_83285b76b5c6c751.png 330w,http://localhost:1313/three-pillars-of-the-arduino-cli/arduino-cli-main_hu_77bb4f336cd88bc8.png 660w
          
            ,http://localhost:1313/three-pillars-of-the-arduino-cli/arduino-cli-main_hu_603df099817e4c06.png 1024w
          
          
            ,http://localhost:1313/three-pillars-of-the-arduino-cli/arduino-cli-main_hu_ca68f8c9c8b3e983.png 1320w
          "
          sizes="100vw"
        
      />
    </picture>
  


    
  </figure>


<p>gRPC is language-agnostic: even if the example is written in Golang, the programming language used for the client
can be Python, JavaScript or any of the many supported ones, leading to a variety of possible scenarios. The new
Arduino Pro IDE is a good example of how to leverage the daemon mode of the Arduino CLI with a clean separation
of concerns: the Pro IDE knows nothing about how to download a core, compile a sketch or talk to an Arduino board
and it demands all these features of an Arduino CLI instance. Conversely, the Arduino CLI doesn’t even know that
the client that’s connected is the Pro IDE, and neither does it care.</p>
<h2 id="the-third-pillar-embedding" class="relative group">The third pillar: embedding <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#the-third-pillar-embedding" aria-label="Anchor">#</a></span></h2><p>The Arduino CLI is written in Golang and the code is organized in a way that makes it easy to use it as a library
by including the modules you need in another Golang application at compile time. Both the first and second
pillars rely on a common Golang API, a set of functions that abstract all the functionalities offered by the
Arduino CLI, so that when we provide a fix or a new feature, they are automatically available to both the command
line and gRPC interfaces.</p>
<p>The source modules implementing this API can be imported in other Golang programs to embed a full-fledged Arduino
CLI. For example, this is how some backend services powering Arduino Create can compile sketches and manage
libraries. Just to give you a taste of what it means to embed the Arduino CLI, here is how to search for a core
using the API:</p>

  
  
  
  
  

  
  
  <figure class="mx-auto my-0 rounded-md">
    
      
      








  
    <picture
      class="mx-auto my-0 rounded-md"
      
    >
      
      
      
      
        <source
          
            srcset="http://localhost:1313/three-pillars-of-the-arduino-cli/arduino-cli-embed_hu_eca11dd80d9a9c45.webp 330w,http://localhost:1313/three-pillars-of-the-arduino-cli/arduino-cli-embed_hu_635e48fcf016dc66.webp 660w
            
              ,http://localhost:1313/three-pillars-of-the-arduino-cli/arduino-cli-embed_hu_a739ab6f77d0376f.webp 1024w
            
            
              ,http://localhost:1313/three-pillars-of-the-arduino-cli/arduino-cli-embed_hu_8791d5f7ac70af76.webp 1320w
            "
          
          sizes="100vw"
          type="image/webp"
        />
      
      <img
        width="1600"
        height="1406"
        class="mx-auto my-0 rounded-md"
        
        loading="lazy" decoding="async"
        
          src="http://localhost:1313/three-pillars-of-the-arduino-cli/arduino-cli-embed_hu_339710d3ab4960d4.png" srcset="http://localhost:1313/three-pillars-of-the-arduino-cli/arduino-cli-embed_hu_af324073ef9d49f1.png 330w,http://localhost:1313/three-pillars-of-the-arduino-cli/arduino-cli-embed_hu_339710d3ab4960d4.png 660w
          
            ,http://localhost:1313/three-pillars-of-the-arduino-cli/arduino-cli-embed_hu_b0cfeb244ef008ae.png 1024w
          
          
            ,http://localhost:1313/three-pillars-of-the-arduino-cli/arduino-cli-embed_hu_81ba4fd1ba92a86d.png 1320w
          "
          sizes="100vw"
        
      />
    </picture>
  


    
  </figure>


<p>Embedding the Arduino CLI is limited to Golang applications and requires a deep knowledge of its internals. For
the average use case, the gRPC interface might be a better alternative; nevertheless this remains a valid option
that we use and provide support for.</p>
<h2 id="conclusion" class="relative group">Conclusion <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#conclusion" aria-label="Anchor">#</a></span></h2><p>You can start playing with the Arduino CLI right away. The code is open source and we provide extensive
documentation. The repo contains example code showing how to implement a gRPC client, and if you’re curious about
how we designed the low-level API, have a look at the commands package and don’t hesitate to leave feedback on
the issue tracker if you’ve got a use case that doesn’t fit one of the three pillars.</p>

      </div>
    </section>
    <footer class="max-w-prose pt-8 print:hidden">
      

      

      
  
    
    
    
    <div class="pt-8">
      <hr class="border-dotted border-neutral-300 dark:border-neutral-600" />
      <div class="flex justify-between pt-3">
        <span>
          
            <a class="group flex" href="http://localhost:1313/how-to-deal-with-api-clients-the-lazy-way/">
              <span
                class="me-2 text-neutral-700 transition-transform group-hover:-translate-x-[2px] group-hover:text-primary-600 dark:text-neutral dark:group-hover:text-primary-400"
                ><span class="ltr:inline rtl:hidden">&larr;</span
                ><span class="ltr:hidden rtl:inline">&rarr;</span></span
              >
              <span class="flex flex-col">
                <span
                  class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500"
                  >How to deal with API clients, the lazy way - from code generation to release management</span
                >
                <span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
                  
                    <time datetime="2020-03-05 00:00:00 &#43;0200 &#43;0200">5 March 2020</time>
                  
                </span>
              </span>
            </a>
          
        </span>
        <span>
          
            <a class="group flex text-right" href="http://localhost:1313/why-did-you-move%20to-management/">
              <span class="flex flex-col">
                <span
                  class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500"
                  >Why did you move to management?</span
                >
                <span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
                  
                    <time datetime="2021-08-22 11:31:38 &#43;0200 CEST">22 August 2021</time>
                  
                </span>
              </span>
              <span
                class="ms-2 text-neutral-700 transition-transform group-hover:-translate-x-[-2px] group-hover:text-primary-600 dark:text-neutral dark:group-hover:text-primary-400"
                ><span class="ltr:inline rtl:hidden">&rarr;</span
                ><span class="ltr:hidden rtl:inline">&larr;</span></span
              >
            </a>
          
        </span>
      </div>
    </div>
  


      
    </footer>
  </article>

      </main>
      
        <div
          class="pointer-events-none absolute bottom-0 end-0 top-[100vh] w-12"
          id="to-top"
          hidden="true"
        >
          <a
            href="#the-top"
            class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 backdrop-blur hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400"
            aria-label="Scroll to top"
            title="Scroll to top"
          >
            &uarr;
          </a>
        </div>
      <footer class="py-10 print:hidden">
  
  
  <div class="flex items-center justify-between">
    <div>
      
      
        <p class="text-sm text-neutral-500 dark:text-neutral-400">
            &copy;
            2025
            Massimiliano Pippi
        </p>
      
      
      
        <p class="text-xs text-neutral-500 dark:text-neutral-400">
          
          
          Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
            href="https://gohugo.io/" target="_blank" rel="noopener noreferrer">Hugo</a> &amp; <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href="https://github.com/jpanther/congo" target="_blank" rel="noopener noreferrer">Congo</a>
        </p>
      
    </div>
    <div class="flex flex-row items-center">
      
      
      
      
        <div
          class="me-14 cursor-pointer text-sm text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"
        >
          <button id="appearance-switcher-0" type="button" aria-label="appearance switcher">
            <div
              class="flex h-12 w-12 items-center justify-center dark:hidden"
              title="Switch to dark appearance"
            >
              <span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>
</span>
            </div>
            <div
              class="hidden h-12 w-12 items-center justify-center dark:flex"
              title="Switch to light appearance"
            >
              <span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>
</span>
            </div>
          </button>
        </div>
      
    </div>
  </div>
  
  
</footer>

    </div>
  </body>
</html>
